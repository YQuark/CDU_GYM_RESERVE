# CDU_GYM_RESERVE — 示例预约自动化套件

> ✅ **隐私与合规优先**：仓库中的所有文本、示例和截图均使用占位/脱敏数据，不包含真实第三方域名、账号、shop_id、cookie 或 token。

CDU_GYM_RESERVE 提供了一套用于演示预约流程自动化的工具链，包括命令行脚本、可视化界面以及脱敏导出工具。代码已经过界面美化与安全重构，可直接用于软著/合规材料准备：

- 💻 **现代化 GUI 面板**：采用两栏布局、分组卡片、即时校验与示例填充，支持浅/深色主题、键盘导航和折叠式日志面板。
- 🛡️ **隐私防护内建**：日志与导出默认脱敏，界面提供“显示敏感信息”二次确认开关，所有输出自动替换 `shop_id`、Cookie、URL 等敏感字段。
- 🔁 **任务执行核心**：支持多关键字匹配、日期区间拆分、重试与并发控制，可在命令行与 GUI 间共享配置。
- 📦 **提交材料友好**：仓库附带 `.env.example`、脱敏导出脚本与自检清单，帮助研发团队快速生成可备案的演示包。

---

## 快速上手

1. 克隆仓库并安装依赖（示例）：
   ```bash
   git clone https://example.com/your-org/CDU_GYM_RESERVE.git
   cd CDU_GYM_RESERVE
   pip install -r requirements.txt
   ```
2. 复制配置模板：
   ```bash
   cp .env.example .env
   ```
   > `.env` 中的真实凭证应通过安全渠道注入（如 CI/CD 密钥、KMS、Vault），提交材料仅保留 `.env.example`。
3. 启动可视化面板：
   ```bash
   python gui.py
   ```
   使用“填充示例值”按钮快速体验。真实运行时请在后端配置接口与凭证，前端界面不会保存敏感信息。

---

## 核心能力

### 命令行脚本

- `python main.py`：载入环境变量或 JSON 配置执行预约任务。
- `python cli.py run-tasks`：按参数重写日期、shop_id、关键字等信息后批量执行。
- `python main_request.py`：最小化示例，演示如何通过 HTTP 直接触发预约请求。

所有 CLI 输出均经过 `privacy.py` 的脱敏处理：`shop_id`、URL、Cookie、token 等字段会被替换为占位值或哈希后缀，确保日志可直接用于提交材料。

### 可视化界面亮点

- 两栏响应式布局：左侧卡片化表单（连接配置 / 任务规则 / 执行参数 / 隐私与操作），右侧可折叠预览面板（配置预览、实时日志、运行历史、操作说明）。
- 现代控件：标签输入（TagInput）、多段日期选择器、重试间隔步进器、并发滑块、即时校验提示与“示例值”快捷填充。
- 日志与导出：支持 INFO/WARN/ERROR 级别过滤，默认脱敏展示，导出 JSON 前自动执行正则清洗。
- 深色模式 & 无障碍：键盘导航、焦点高亮、ARIA 友好文本提示。

界面源码位于 [`gui.py`](gui.py)，配合 [`privacy.py`](privacy.py) 提供的脱敏方法实现端到端安全显示。

---

## 隐私与合规实践

| 项目 | 说明 |
| --- | --- |
| 脱敏输出 | `privacy.py` 提供 `sanitize_text` / `sanitize_payload` / `mask_identifier` 等函数，对日志、预览、导出文件统一处理。|
| 环境变量管理 | 所有第三方域名、API、token 通过环境变量注入，示例 `.env.example` 仅包含占位值；真实 `.env` 不应纳入提交材料。|
| 截图处理 | 推荐使用自带的 `scrub_screenshots.sh` 对截图再处理或直接使用示例模式重新录制。|
| 提交自检 | README 末尾提供三条红线：提交包不得包含真实域名/账号；代码仓库无明文凭证；日志/导出全部经过脱敏。|

---

## 提交包建议

1. **代码**：保留当前仓库结构，确认不存在真实域名/账号/凭证。
2. **配置模板**：提交 `.env.example`，并在说明书中强调真实部署需由持有方配置。
3. **截图/录屏**：使用 GUI “示例值”模式录制，并运行 `scrub_screenshots.sh` 或其他遮罩工具处理。
4. **脱敏报告**：导出日志后附带一份说明（字段替换规则、处理脚本位置）。
5. **使用说明**：在文档中说明所有演示数据均为示例，真实凭证需放置于后端安全存储中。

---

## 自检清单（提交前必读）

- [ ] 提交材料中 **不包含** 真实域名、真实 shop_id、真实账号、真实 cookie/token。
- [ ] 仓库及示例配置 **无明文凭证**，仅保留占位值 (`<REDACTED>` / `example_value`)。
- [ ] 所有导出日志、JSON、截图 **均经过脱敏处理**，并准备一份脱敏报告说明规则。

如需进一步集成到企业环境，可在此基础上追加后端代理、密钥管理或合规审计模块。欢迎针对示例工程提交 Issue/PR 改进体验。
